(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],Array(18).concat([function(e,t,a){e.exports=a(44)},,,,,function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(12),l=a.n(c),i=(a(23),a(5)),u=a(2),s=a(4),o=a(13),d=a(14),m=a(17),f=a(16),p=a(15);a(27);var E=function(e){return r.a.createElement("div",{id:"header"},r.a.createElement("h1",null,r.a.createElement("span",null,"Nertz"),e.gameId?r.a.createElement("span",null,e.gameId):null,e.name?r.a.createElement("span",null,e.name):null))},h=a(3);a(28);var g=function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),c=a[0],l=a[1];return r.a.createElement("div",{id:"login"},r.a.createElement("div",null,r.a.createElement("p",{id:"login-announcement"},"ENTER A USERNAME TO BEGIN"),r.a.createElement("input",{type:"text",name:"name",placeholder:"USERNAME",onChange:function(e){return l(e.target.value.toUpperCase().replace(/([^A-Z\s_\d]|\s(?=\s))/g,"").slice(0,10))},value:c}),r.a.createElement("input",{type:"button",onClick:function(){return c.length?e.handleLogin(c):null},value:"SUBMIT"})))};a(29),a(30);function v(e){return r.a.createElement("div",{className:"lobby-user"},r.a.createElement("p",null,e.name))}var b=a(7);var y=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),c=a[0],l=a[1];return r.a.createElement("div",{id:"lobby-container"},r.a.createElement("div",{id:"lobby-announcement"},r.a.createElement("p",null,"We're waiting to get started!")),r.a.createElement("div",{id:"lobby-user-container"},e.users.map((function(e,t){return r.a.createElement(v,{key:t,name:e})}))),r.a.createElement("div",{id:"lobby-ready-container"},r.a.createElement("div",{id:"lobby-ready-button",className:c?"ready":"unready",onClick:function(){return e.handleReady(!c),void l(!c)}},r.a.createElement("p",null,c?"CANCEL":"READY")),e.isOffline?null:r.a.createElement("div",{id:"lobby-ready-users"},e.users.map((function(t,a){return t!==String("CPU "+Number(a+1))?r.a.createElement("div",{key:a,className:"ready-user"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,t),-1!==e.readyUsers.indexOf(t)?r.a.createElement(b.a,{className:"ready",title:"ready"}):r.a.createElement(b.b,{className:"unready",title:"not ready"}))):null})))))};a(31);var O=function(e){return r.a.createElement("div",{id:"countdown-container"},r.a.createElement("div",{id:"countdown-"+e.shape},r.a.createElement("h1",{id:"countdown-text"},e.text)))},k=(a(32),a(33),a(34),a(9));var C=function(e){var t=e.card.slice(0,2),a=e.card.slice(2,3),n=e.card.slice(3,4),c=function(e){switch(Number(e)){case 0:return"";case 1:return"A";case 11:return"J";case 12:return"Q";case 13:return"K";default:return String(Number(e))}}(t);return r.a.createElement("div",{id:e.user?e.card+"-"+e.user:e.card,className:"card-box",onClick:function(){return e.user?e.handleClick(e.card,e.user):e.handleClick(e.card)}},r.a.createElement("div",{className:"card",style:{color:"R"===n?"red":"B"===n?"black":"lime"}},r.a.createElement("p",null,c),"H"===a?r.a.createElement(k.c,{title:"hearts"}):"D"===a?r.a.createElement(k.b,{title:"diamonds"}):"S"===a?r.a.createElement(k.d,{title:"spades"}):"C"===a?r.a.createElement(k.a,{title:"clubs"}):r.a.createElement("p",null)))};var N=function(e){return r.a.createElement("fieldset",{id:"lake"},r.a.createElement("legend",{id:"lake-add"},"Lake"),r.a.createElement("div",{id:"lake-container"},r.a.createElement(r.a.Fragment,null,e.lake.map((function(t,a){return r.a.createElement(C,{key:a,card:t[t.length-1].card,user:t[t.length-1].user.replace(/\s/g,"_"),handleClick:e.handleClick})}))),r.a.createElement("div",{id:"ace-out",onClick:function(){return e.handleClick("ace-out")}},r.a.createElement("p",null,"ACE OUT"))))};a(35);var S=function(e){return r.a.createElement("fieldset",{id:"river"},r.a.createElement("legend",null,"River"),r.a.createElement("div",{id:"river-container"},Object(u.a)(Array(4)).map((function(t,a){return r.a.createElement("div",{key:a,className:"river-pile"},e.river[a].map((function(t,a){return r.a.createElement(C,{key:a,card:t,handleClick:e.handleClick})})))}))))};a(36);var j=function(e){return r.a.createElement("fieldset",{id:"nertz"},r.a.createElement("legend",null,"Nertz"),r.a.createElement("div",{id:"nertz-container"},r.a.createElement(C,{card:e.nertz[e.nertz.length-1],handleClick:e.handleClick}),r.a.createElement("p",null,"(",e.nertz.length,")")))};a(37);var U=function(e){return r.a.createElement("fieldset",{id:"stream"},r.a.createElement("legend",null,"Stream"),r.a.createElement("div",{id:"stream-container"},r.a.createElement("div",{id:"stream-cards"},Object(u.a)(Array(e.streamPileSize)).map((function(t,a){return r.a.createElement(C,{key:a,card:e.stream[e.streamIndex+a],handleClick:a===e.streamPileSize-1?e.handleClick:function(){return console.log("stream click")}})}))),r.a.createElement("div",{id:"next-stream",onClick:function(){return e.nextStream()}},r.a.createElement("p",null,"NEXT"))))};function w(){for(var e=[],t=["01HR","02HR","03HR","04HR","05HR","06HR","07HR","08HR","09HR","10HR","11HR","12HR","13HR","01SB","02SB","03SB","04SB","05SB","06SB","07SB","08SB","09SB","10SB","11SB","12SB","13SB","01DR","02DR","03DR","04DR","05DR","06DR","07DR","08DR","09DR","10DR","11DR","12DR","13DR","01CB","02CB","03CB","04CB","05CB","06CB","07CB","08CB","09CB","10CB","11CB","12CB","13CB"];t.length;){var a=z(t.length),n=t[a];e.push(n),t.splice(a,1)}return 52===e.length&&e}function R(e,t){return Number(t.slice(0,2))+1===Number(e.slice(0,2))&&t.slice(3,4)!==e.slice(3,4)}function P(e,t){return Number(t.slice(0,2))-1===Number(e.slice(0,2))&&t.slice(2,3)===e.slice(2,3)}function z(e){return Math.floor(Math.random()*e)}var I=function(e){var t=w(),a=Object(n.useState)([[t[0]],[t[1]],[t[2]],[t[3]]]),c=Object(h.a)(a,2),l=c[0],i=c[1],s=Object(n.useState)(t.slice(4,17)),o=Object(h.a)(s,2),d=o[0],m=o[1],f=Object(n.useState)(t.slice(17,53)),p=Object(h.a)(f,2),E=p[0],g=p[1],v=Object(n.useState)(0),b=Object(h.a)(v,2),y=b[0],O=b[1],k=Object(n.useState)(3),C=Object(h.a)(k,2),z=C[0],I=C[1],L=Object(n.useState)(null),A=Object(h.a)(L,2),B=A[0],T=A[1],J=Object(n.useState)(0),x=Object(h.a)(J,2),D=x[0],M=x[1],H=e.updateScore,F=e.updateNertz;Object(n.useEffect)((function(){H(D)}),[H,D]),Object(n.useEffect)((function(){F(d.length)}),[F,d]);var G=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("ace-out"===t&&B&&"01"===B.slice(0,2)){e.newLake([].concat(Object(u.a)(e.lake),[[{card:B,user:e.name}]]));var n=X(B);K(n),_(B),M(D+1)}else if("ace-out"===t);else if("00"===t.slice(0,2)&&B){var r=Object(u.a)(l).filter((function(e){return e.includes(B)})),c=r.length?r[0].slice(r[0].indexOf(B),r[0].length):[B],s=Object(u.a)(l),o=X(B);if("river"===o[0]){var m=o[1],f=W(t.slice(2,3),c,m);i(f)}else{var p=W(t.slice(2,3),c,s);i(p),K(o)}_(B)}else if("00"===t.slice(0,2));else if(B===t)_(t);else if(B&&B!==t)e.lake.forEach((function(n,r){if(n[n.length-1].card===t&&n[n.length-1].user===a&&P(t,B)){var c=Object(u.a)(e.lake);c[r].push({card:B,user:e.name}),e.newLake(c);var l=X(B);K(l),_(B),M(D+1)}})),l.forEach((function(e,a){if(e[e.length-1]===t&&R(t,B)){var n=Object(u.a)(l).filter((function(e){return e.includes(B)})),r=n.length?n[0].slice(n[0].indexOf(B),n[0].length):[B],c=X(B),s=Object(u.a)(l);"river"===c[0]?s=c[1]:K(c),r.forEach((function(e,t){s[a].push(e)})),i(s),_(B)}}));else{var h=!1;l.forEach((function(e,a){e.forEach((function(e,a){e===t&&(h=!0)}))})),d[d.length-1]===t&&(h=!0),E[y+z-1]===t&&(h=!0),h&&Y(t)}},Y=function(e){document.getElementById(e).className+=" selected",T(e)},_=function(e){document.getElementById(e).className="card-box",T(void 0)},X=function(e){if(e===d[d.length-1])return["nertz",Object(u.a)(d.slice(0,d.length-1))];if(e===E[y+z-1]){var t=[].concat(Object(u.a)(E.slice(0,y+z-1)),Object(u.a)(E.slice(y+z,E.length)));return I(z-1),z||Z(),["stream",t]}var a=Object(u.a)(l);return l.forEach((function(t,n){t.forEach((function(r,c){r===e&&(a[n]=Object(u.a)(t.slice(0,c)),a[n].length||(a[n]=["00"+n+"X"]))}))})),["river",a]},K=function(e){switch(e[0]){case"river":i(e[1]);break;case"nertz":m(e[1]);break;case"stream":g(e[1]);break;default:console.log("unrecognized removal location")}},W=function(e,t,a){var n=Object(u.a)(a);return n[e]=[],t.forEach((function(t,a){n[e].push(t)})),n},Z=function(){var e=y+Math.min(3,E.length-y);e>=E.length&&(e=0),O(e);var t=Math.min(3,E.length-e);I(t),B&&_(B)};return r.a.createElement("div",{id:"game"},r.a.createElement("div",{id:"game-lake-row"},r.a.createElement(N,{lake:e.lake,handleClick:G})),r.a.createElement("div",{id:"game-player-row"},r.a.createElement("div",{id:"game-player-row-1"},r.a.createElement(S,{river:l,handleClick:G})),r.a.createElement("div",{id:"game-player-row-2",className:"flex-row"},r.a.createElement(j,{nertz:d.length>0?d:["00XX"],handleClick:G}),r.a.createElement(U,{stream:E,handleClick:G,streamIndex:y,streamPileSize:z,nextStream:Z}))))};var L=function(e){var t=Object(n.useRef)(null),a=w(),r=Object(n.useRef)([[a[0]],[a[1]],[a[2]],[a[3]]]),c=Object(n.useRef)(a.slice(4,17)),l=Object(n.useRef)(a.slice(17,53)),u=Object(n.useRef)(0),s=Object(n.useRef)(3),o=Object(n.useRef)(0),d=e.difficulty;Object(n.useEffect)((function(){var e=1,a=1;switch(Number(d)){case 1:e=2e3,a=.4;break;case 2:e=1600,a=.8;break;case 3:e=1e3,a=1;break;default:console.log("invalid difficulty selected")}var n=setTimeout((function(){t.current=setInterval((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=!1;if(Math.random()<e/3)switch(z(2)){case 0:t=p();break;case 1:t=E()}else switch(z(4)){case 0:t=m();break;case 1:t=f();break;case 2:t=h(),t&&0!==s.current||b();break;case 3:t=g(),t&&0!==s.current||b()}}(a)}),e)}),Math.random()*e);return function(){clearInterval(t.current),clearTimeout(n)}}));var m=function(){for(var e=[],t=0;t<4;t++)for(var a=0;a<4;a++)if(t!==a)for(var n=0;n<r.current[t].length;n++)R(r.current[a][r.current[a].length-1],r.current[t][n])&&e.push([t,a,n]);if(e.length){var c=e[z(e.length)];return r.current[c[1]]=r.current[c[1]].concat(r.current[c[0]].slice(c[2],r.current[c[0]].length)),r.current[c[0]]=[],v(),!0}return!1},f=function(){for(var t=0;t<4;++t){if("01"===r.current[t][r.current[t].length-1].slice(0,2)){o.current=o.current+1,e.updateCPUScore(e.id,o.current);var a=e.get_lake();return a.push([{card:r.current[t].pop(),user:"*"+e.id}]),e.newLake(a),v(),!0}var n,c=e.get_lake(),l=Object(i.a)(c);try{for(l.s();!(n=l.n()).done;){var u=n.value;if(P(u[u.length-1].card,r.current[t][r.current[t].length-1]))return o.current=o.current+1,e.updateCPUScore(e.id,o.current),u.push({card:r.current[t].pop(),user:"*"+e.id}),v(),e.newLake(c),!0}}catch(s){l.e(s)}finally{l.f()}}return!1},p=function(){var t,a=Object(i.a)(r.current);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(R(n[n.length-1],c.current[c.current.length-1]))return n.push(c.current.pop()),console.log("nertz pop:",c.current.length,"id:",e.id),e.updateCPUNertz(e.id,c.current.length),!0}}catch(l){a.e(l)}finally{a.f()}return!1},E=function(){if("01"===c.current[c.current.length-1].slice(0,2)){o.current=o.current+1,e.updateCPUScore(e.id,o.current);var t=e.get_lake();return t.push([{card:c.current.pop(),user:"*"+e.id}]),console.log("nertz pop:",c.current.length,"id:",e.id),e.updateCPUNertz(e.id,c.current.length),e.newLake(t),!0}var a,n=e.get_lake(),r=Object(i.a)(n);try{for(r.s();!(a=r.n()).done;){var l=a.value;if(P(l[l.length-1].card,c.current[c.current.length-1]))return o.current=o.current+1,e.updateCPUScore(e.id,o.current),l.push({card:c.current.pop(),user:"*"+e.id}),e.newLake(n),console.log("nertz pop:",c.current.length,"id:",e.id),e.updateCPUNertz(e.id,c.current.length),!0}}catch(u){r.e(u)}finally{r.f()}return!1},h=function(){0===s.current&&b();var e,t=l.current[u.current+s.current-1],a=Object(i.a)(r.current);try{for(a.s();!(e=a.n()).done;){var n=e.value;if(R(n[n.length-1],t))return n.push(t),l.current.splice(u.current+s.current-1,1),s.current=s.current-1,!0}}catch(c){a.e(c)}finally{a.f()}return!1},g=function(){0===s.current&&b();var t=l.current[u.current+s.current-1];if("01"===t.slice(0,2)){o.current=o.current+1,e.updateCPUScore(e.id,o.current);var a=e.get_lake();return a.push([{card:t,user:"*"+e.id}]),e.newLake(a),l.current.splice(u.current+s.current-1,1),s.current=s.current-1,!0}var n,r=e.get_lake(),c=Object(i.a)(r);try{for(c.s();!(n=c.n()).done;){var d=n.value;if(P(d[d.length-1].card,t))return o.current=o.current+1,e.updateCPUScore(e.id,o.current),d.push({card:l.current.splice(u.current+s.current-1,1)[0],user:"*"+e.id}),s.current=s.current-1,!0}}catch(m){c.e(m)}finally{c.f()}return!1},v=function(){for(var t=0;t<4;++t)0===r.current[t].length&&(r.current[t]=[c.current.pop()],console.log("nertz pop:",c.current.length,"id:",e.id),e.updateCPUNertz(e.id,c.current.length))},b=function(){u.current+=3,u.current>=l.current.length&&(u.current=0),s.current=Math.min(3,l.current.length-u.current)};return null};a(38);var A=function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),u=Object(h.a)(i,2),s=u[0],o=u[1],d=function(t){var a=t.offline;if(!Number(s)||Number(s)>8){console.log(Number(s),Number(s)>8);var n=r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Please enter a valid number of computers opponents"),r.a.createElement("br",null),r.a.createElement("span",null,"(MIN 0, MAX 8)"));e.throwPopup(n)}else if(""===document.getElementById("create-cpu-difficulty").value){var c=r.a.createElement("span",null,"Please select a difficulty for the computer opponents");e.throwPopup(c)}else{var l=document.getElementById("create-cpu-difficulty").value;e.handleCreate(s,l,a)}};return r.a.createElement("div",{id:"join"},r.a.createElement("div",null,e.isOffline?null:r.a.createElement("div",null,r.a.createElement("h2",{id:"join-announcement"},"ENTER A GAME ID TO JOIN"),r.a.createElement("input",{type:"text",name:"gameId",placeholder:"GAME ID",onChange:function(e){return l(e.target.value.toUpperCase())},value:c}),r.a.createElement("input",{type:"button",onClick:function(){return e.handleJoin(c)},value:"JOIN"})),r.a.createElement("div",null,r.a.createElement("h2",{id:"create-announcement"},e.isOffline?"CONFIGURE YOUR GAME":"OR HOST A NEW GAME"),r.a.createElement("div",null,r.a.createElement("input",{id:"create-cpu-count",type:"text",placeholder:"# CPUs",value:s,onChange:function(e){return o(e.target.value.replace(/\D/g,""))}}),r.a.createElement("select",{id:"create-cpu-difficulty"},r.a.createElement("option",{value:""},"SELECT DIFFICULTY"),r.a.createElement("option",{value:"1"},"EASY"),r.a.createElement("option",{value:"2"},"MEDIUM"),r.a.createElement("option",{value:"3"},"HARD"),r.a.createElement("option",{value:"4"},"EXPERT"))),e.isOffline?null:r.a.createElement("input",{className:"create-button",type:"button",onClick:function(){return d({offline:!1})},value:"CREATE ONLINE"}),r.a.createElement("input",{className:"create-button ".concat(e.isOffline?"":"outlined"),type:"button",onClick:function(){return d({offline:!0})},value:"PLAY OFFLINE"}))))};a(39);var B=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),c=a[0],l=a[1],i=function(e,t){var a,n=[];Object.keys(e).forEach((function(a,r){var c=a,l=Number(e[a].lake)-2*Number(e[a].nertz),i=t[a]-l,u=t[a];n.push({name:c,prev:i,update:l,total:u})}));do{a=!1;for(var r=0;r<n.length-1;r++){if(n[r].total<n[r+1].total){var c=[n[r+1],n[r]];n[r]=c[0],n[r+1]=c[1],a=!0}}}while(a);return n}(e.scoreUpdate,e.scores),u=function(e){var t,a=[];Object.keys(e).forEach((function(t,n){var r=e[t].lake,c=e[t].nertz,l=-2*Number(e[t].nertz),i=Number(r)-2*Number(c),u=i<0?String(i):"+"+String(i);a.push({name:t,lake:r,nertz:c,nertzPts:l,score:i,scoreText:u})}));do{t=!1;for(var n=0;n<a.length-1;n++){if(a[n].score<a[n+1].score){var r=[a[n+1],a[n]];a[n]=r[0],a[n+1]=r[1],t=!0}}}while(t);return a}(e.scoreUpdate);return r.a.createElement("div",{id:"scoreboard"},r.a.createElement("div",null,r.a.createElement("p",{className:"scoreboard-title"},"SCOREBOARD")),r.a.createElement("div",null,r.a.createElement("p",{className:"scoreboard-subtitle"},"GAME ",e.gameCount," RESULTS"),r.a.createElement("table",{className:"scoreboard-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"PLAYER"),r.a.createElement("td",null,"LAKE"),r.a.createElement("td",null,"(NERTZ)"),r.a.createElement("td",null,"TOTAL"))),r.a.createElement("tbody",null,u.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.name),r.a.createElement("td",null,"+",e.lake),r.a.createElement("td",null,e.nertzPts," (",e.nertz,")"),r.a.createElement("td",null,e.scoreText))}))))),r.a.createElement("div",null,r.a.createElement("p",{className:"scoreboard-subtitle"},"CURRENT LEADERBOARD"),r.a.createElement("table",{className:"scoreboard-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"PLAYER"),r.a.createElement("td",null,"PREV"),r.a.createElement("td",null,"GAME ",e.gameCount),r.a.createElement("td",null,"TOTAL"))),r.a.createElement("tbody",null,i.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.prev),r.a.createElement("td",null,e.update<0?e.update:"+"+e.update),r.a.createElement("td",null,e.total))}))))),r.a.createElement("div",{id:"scoreboard-ready-container"},r.a.createElement("div",{id:"scoreboard-ready-button",className:c?"ready":"unready",onClick:function(){return e.handleReady(!c),void l(!c)}},r.a.createElement("p",null,c?"CANCEL":"READY")),e.isOffline?null:r.a.createElement("div",{id:"scoreboard-ready-users"},Object.keys(e.scores).map((function(t,a){return t!==String("CPU "+Number(a+1))?r.a.createElement("div",{key:a,className:"ready-user"},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,t),-1!==e.readyUsers.indexOf(t)?r.a.createElement(b.a,{className:"ready",title:"ready"}):r.a.createElement(b.b,{className:"unready",title:"not ready"}))):null})))))};a(40);var T=function(e){return r.a.createElement("div",{id:"popup-backdrop"},r.a.createElement("div",{id:"popup"},r.a.createElement("div",{id:"popup-text"},r.a.createElement("p",null,e.text)),r.a.createElement("div",{id:"popup-close",onClick:function(){return e.handleClose()}},r.a.createElement("p",null,"OKAY"))))},J=(a(41),a(42),a(10));var x=function(e){return r.a.createElement("div",{className:"spinner-container"},r.a.createElement(J.b,{size:e.size,style:{left:Math.floor(5/12*e.size)},title:"loading icon 1"}),r.a.createElement(J.a,{size:Math.floor(e.size*(2/3)),style:{left:Math.floor(-5/12*e.size)},title:"loading icon 2"}))};var D,M=function(e){return r.a.createElement("div",{id:"connecting"},r.a.createElement("h2",null,"CONNECTING TO SERVER..."),r.a.createElement(x,{size:30}),r.a.createElement("input",{className:"outlined",type:"button",value:"CONTINUE OFFLINE",onClick:e.goOffline}))},H=(a(43),!1);try{D=new p.w3cwebsocket("ws:192.168.56.1:8000")}catch(G){console.error("Failed to connect to server:",G),H=!0}var F=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={isJoinedOffline:!1,willBeOffline:!1,isConnected:!1,gameId:!1,isLoggedIn:!1,isRunning:!1,isLocked:!0,isReady:!1,isHost:!1,numCPUs:0,CPUdiff:1,readyUsers:[],countdown:void 0,countdownTimeout:[],popup:!1,name:void 0,users:[],lake:[],lastLake:0,lastNertz:13,lastCPULake:[],lastCPUNertz:[],scores:{},scoreUpdate:{},gameCount:0},e.configureClient=function(){D.onopen=function(){e.setState({isConnected:!0,willBeOffline:!0})},D.onmessage=function(t){var a=JSON.parse(t.data);switch(a.type){case"lakeupdate":e.setState({lake:a.data});break;case"userlist":var n=Object(s.a)({},e.state.scores);a.data.forEach((function(e,t){-1===Object.keys(n).indexOf(e)&&(n[e]=0)})),e.setState({users:a.data,scores:Object(s.a)({},n)});break;case"loginstatus":a.data?e.setState({isLoggedIn:!0,name:a.data}):alert("That username is already taken. Please type another and join again.");break;case"gamestatus":if("end"===a.data){if(e.endGame(),D.send(JSON.stringify({type:"newscore",gameId:e.state.gameId,lake:e.state.lastLake,nertz:e.state.lastNertz,cpu:!1})),e.state.isHost)for(var c=0;c<e.state.numCPUs;c++)D.send(JSON.stringify({type:"newscore",gameId:e.state.gameId,lake:e.state.lastCPULake[c],nertz:e.state.lastCPUNertz[c],cpu:!0,cpuId:String("*"+c)}));break}if(a.data>0)e.state.isRunning?e.setState({countdown:Number(a.data)}):e.setState({isRunning:!0,countdown:Number(a.data)});else if(0===a.data){var l=Array.from(Array(Number(e.state.numCPUs)),(function(){return 0})),i=Array.from(Array(Number(e.state.numCPUs)),(function(){return 13}));e.setState({countdown:void 0,isLocked:!1,lake:[],lastLake:0,lastNertz:13,readyUsers:[],lastCPULake:Object(u.a)(l),lastCPUNertz:Object(u.a)(i)})}break;case"scoreupdate":var o=Object(s.a)({},e.state.scores);Object.keys(a.data).forEach((function(e,t){o[e]+=Number(a.data[e].lake)-2*Number(a.data[e].nertz)})),e.setState({scoreUpdate:a.data,scores:Object(s.a)({},o),gameCount:e.state.gameCount+1});break;case"readyupdate":e.setState({readyUsers:a.data});break;case"createupdate":!1!==a.data?e.setState({gameId:a.data,isHost:!0},(function(){console.log("created and joined game id",e.state.gameId);var t=r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Your new game was created! Invite your friends to play along with Game Code: "),r.a.createElement("span",{className:"monospace"},e.state.gameId));e.setState({popup:t})})):alert("An error occurred while creating your game. Please try again.");break;case"joinupdate":!1!==a.data?e.setState({gameId:a.data},(function(){console.log("joined game id",e.state.gameId)})):alert("Sorry we couldn't add you to this game.");break;default:console.log("unrecognized type",a.type)}}},e.goOffline=function(){e.setState({isConnected:!0,willBeOffline:!0}),H=!0,console.log("Zero dark thirty. Going dark")},e.endGame=function(){if(e.state.isJoinedOffline){var t=r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Nertz!"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",null,"Click OKAY to view the results.")),a={};a[e.state.name]={lake:e.state.lastLake,nertz:e.state.lastNertz};for(var n=0;n<e.state.numCPUs;n++){var c="CPU "+String(n);a[c]={lake:e.state.lastCPULake[n],nertz:e.state.lastCPUNertz[n]}}var l=Object(s.a)({},e.state.scores);Object.keys(a).forEach((function(e,t){l[e]+=Number(a[e].lake)-2*Number(a[e].nertz)})),e.setState({isLocked:!0,popup:t,scoreUpdate:a,scores:Object(s.a)({},l),gameCount:e.state.gameCount+1})}else{var i=r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Nertz!"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",null,"Click OKAY to view the results."));e.setState({isLocked:!0,popup:i})}},e.updateScore=function(t){e.setState({lastLake:t})},e.updateNertz=function(t){e.setState({lastNertz:t},(function(){0===e.state.lastNertz&&(e.endGame(),D.send(JSON.stringify({type:"gamestatus",gameId:e.state.gameId,data:!1})))}))},e.updateCPUScore=function(t,a){var n=e.state.lastCPULake;n[t]=a,e.setState({lastCPULake:n})},e.updateCPUNertz=function(t,a){var n=e.state.lastCPUNertz;n[t]=a,e.setState({lastCPUNertz:n},(function(){var t,a=Object(i.a)(e.state.lastCPUNertz);try{for(a.s();!(t=a.n()).done;){if(0===t.value){e.endGame(),D.send(JSON.stringify({type:"gamestatus",gameId:e.state.gameId,data:!1}));break}}}catch(G){a.e(G)}finally{a.f()}}))},e.handleJoin=function(e){D?D.send(JSON.stringify({type:"joingame",data:e})):alert("Could not connect to the server. Please refresh and try again.")},e.handleCreate=function(t,a,n){if(n){for(var r=[],c={},l=0;l<t;l++){var i="CPU "+String(l);r.push(i),c[i]=0}e.setState({numCPUs:t,CPUdiff:a,users:[].concat(r),scores:Object(s.a)({},c),isJoinedOffline:!0})}else e.setState({numCPUs:t,CPUdiff:a}),D.send(JSON.stringify({type:"newgame",numCPUs:t}))},e.handleLogin=function(t){if(e.state.isJoinedOffline)if(-1===e.state.users.indexOf(t)){var a=Object(u.a)(e.state.users),n=Object(s.a)({},e.state.scores);a.push(t),n[t]=0,e.setState({isLoggedIn:!0,name:t,users:Object(u.a)(a),scores:Object(s.a)({},n)})}else alert("That username is already taken. Please type another and join again.");else D.send(JSON.stringify({type:"newuser",gameId:e.state.gameId,name:t}))},e.handleStart=function(){console.log("start!"),D.send(JSON.stringify({type:"gamestatus",gameId:e.state.gameId,data:!0})),e.setState({isRunning:!0,isLocked:!0})},e.handleReady=function(t){if(e.state.isJoinedOffline){e.setState({isRunning:!0,countdown:5});for(var a=function(t){var a=setTimeout((function(){return e.setState({countdown:Number(t)})}),1e3*(5-Number(t))),n=Object(u.a)(e.state.countdownTimeout);n.push(a),e.setState({countdownTimeout:n})},n=4;n>-1;n--)a(n);var r=setTimeout((function(){var t=Array.from(Array(Number(e.state.numCPUs)),(function(){return 0})),a=Array.from(Array(Number(e.state.numCPUs)),(function(){return 13}));e.setState({isLocked:!1,countdown:void 0,lake:[],lastLake:0,lastNertz:13,readyUsers:[],lastCPULake:Object(u.a)(t),lastCPUNertz:Object(u.a)(a)})}),4950),c=Object(u.a)(e.state.countdownTimeout);c.push(r),e.setState({countdownTimeout:c})}else D.send(JSON.stringify({type:"newready",gameId:e.state.gameId,data:t}))},e.newLake=function(t){e.state.isJoinedOffline?e.setState({lake:t}):D.send(JSON.stringify({type:"newlake",gameId:e.state.gameId,data:Object(u.a)(t)}))},e.handlePause=function(t){e.state.isJoinedOffline&&e.setState({isPaused:t})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){if(H)this.setState({isConnected:!0,willBeOffline:!0});else if(D)try{this.configureClient()}catch(G){console.error("Failed to initialize server connection:",G)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"app-container"},r.a.createElement(E,{name:this.state.name,gameId:this.state.gameId}),this.state.isConnected?this.state.gameId||this.state.isJoinedOffline?this.state.isLoggedIn?this.state.isRunning?this.state.isLocked?this.state.countdown?r.a.createElement(O,{text:this.state.countdown,shape:Number(this.state.countdown)?"circle":"square"}):r.a.createElement(B,{scoreUpdate:this.state.scoreUpdate,scores:this.state.scores,handleReady:this.handleReady,readyUsers:this.state.readyUsers,gameCount:this.state.gameCount,isOffline:this.state.isJoinedOffline}):r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{lake:this.state.lake,newLake:this.newLake,name:this.state.name,updateScore:this.updateScore,updateNertz:this.updateNertz}),this.state.isHost?Object(u.a)(Array(Number(this.state.numCPUs))).map((function(t,a){return r.a.createElement(L,{id:a,key:a,get_lake:function(){return Object(u.a)(e.state.lake)},newLake:e.newLake,updateCPUScore:e.updateCPUScore,updateCPUNertz:e.updateCPUNertz,difficulty:e.state.CPUdiff})})):null):r.a.createElement(y,{handleReady:this.handleReady,users:this.state.users,readyUsers:this.state.readyUsers,isOffline:this.state.isJoinedOffline}):r.a.createElement(g,{handleLogin:this.handleLogin}):r.a.createElement(A,{handleJoin:this.handleJoin,handleCreate:this.handleCreate,throwPopup:function(t){return e.setState({popup:t})},isOffline:this.state.willBeOffline}):r.a.createElement(M,{goOffline:this.goOffline}),this.state.popup?r.a.createElement(T,{text:this.state.popup,handleClose:function(){return e.setState({popup:!1})}}):null)}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[18,1,2]]]);
//# sourceMappingURL=main.b76badec.chunk.js.map